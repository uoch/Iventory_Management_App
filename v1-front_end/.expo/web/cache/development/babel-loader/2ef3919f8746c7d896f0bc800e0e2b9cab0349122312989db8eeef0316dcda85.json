{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function RetrieveGoodsScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    goodsData = _useState2[0],\n    setGoodsData = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedGoods = _useState4[0],\n    setSelectedGoods = _useState4[1];\n  useEffect(function () {\n    fetchGoodsData();\n  }, []);\n  var fetchGoodsData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch('http://127.0.0.1:8000/api/retrieve-goods/?store=<store_id>', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          var data = yield response.json();\n          setGoodsData(data);\n        } else {\n          console.log('Error:', response.status);\n        }\n      } catch (error) {\n        console.log('Error:', error.message);\n      }\n    });\n    return function fetchGoodsData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleSelectGoods = function handleSelectGoods(item) {\n    var isSelected = selectedGoods.some(function (selectedItem) {\n      return selectedItem.id === item.id;\n    });\n    if (isSelected) {\n      var updatedGoods = selectedGoods.filter(function (selectedItem) {\n        return selectedItem.id !== item.id;\n      });\n      setSelectedGoods(updatedGoods);\n    } else {\n      setSelectedGoods([].concat(_toConsumableArray(selectedGoods), [item]));\n    }\n  };\n  var handleShipping = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch('http://127.0.0.1:8000/api/retrieve-goods/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            store: \"<store_id>\",\n            selectedProducts: selectedGoods.map(function (item) {\n              return item.id;\n            })\n          })\n        });\n        if (response.ok) {\n          setSelectedGoods([]);\n        } else {\n          console.log('Error:', response.status);\n        }\n      } catch (error) {\n        console.log('Error:', error.message);\n      }\n    });\n    return function handleShipping() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.headerText,\n      children: \"Select Goods to Retrieve\"\n    }), _jsx(FlatList, {\n      data: goodsData,\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      renderItem: function renderItem(_ref4) {\n        var item = _ref4.item;\n        return _jsxs(Pressable, {\n          style: [styles.itemContainer, selectedGoods.includes(item) && styles.selectedItemContainer],\n          onPress: function onPress() {\n            return handleSelectGoods(item);\n          },\n          children: [_jsx(Text, {\n            style: styles.itemName,\n            children: item.name\n          }), _jsx(Text, {\n            style: styles.itemDescription,\n            children: item.description\n          }), _jsx(Text, {\n            style: styles.itemPrice,\n            children: item.price\n          })]\n        });\n      }\n    }), _jsx(Pressable, {\n      style: [styles.shippingButton, selectedGoods.length === 0 && styles.disabledButton],\n      onPress: handleShipping,\n      disabled: selectedGoods.length === 0,\n      children: _jsx(Text, {\n        style: styles.shippingButtonText,\n        children: \"Ship Goods\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F5F5F5'\n  },\n  headerText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    padding: 20\n  },\n  itemContainer: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#CCCCCC'\n  },\n  selectedItemContainer: {\n    backgroundColor: '#E6F2FF'\n  },\n  itemName: {\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666666'\n  },\n  itemPrice: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginTop: 10\n  },\n  shippingButton: {\n    backgroundColor: '#333333',\n    paddingVertical: 15,\n    alignItems: 'center',\n    marginTop: 20,\n    marginHorizontal: 20,\n    borderRadius: 8\n  },\n  disabledButton: {\n    backgroundColor: '#AAAAAA'\n  },\n  shippingButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","FlatList","Pressable","jsx","_jsx","jsxs","_jsxs","RetrieveGoodsScreen","_ref","navigation","_useState","_useState2","_slicedToArray","goodsData","setGoodsData","_useState3","_useState4","selectedGoods","setSelectedGoods","fetchGoodsData","_ref2","_asyncToGenerator","response","fetch","method","headers","ok","data","json","console","log","status","error","message","apply","arguments","handleSelectGoods","item","isSelected","some","selectedItem","id","updatedGoods","filter","concat","_toConsumableArray","handleShipping","_ref3","body","JSON","stringify","store","selectedProducts","map","style","styles","container","children","headerText","keyExtractor","toString","renderItem","_ref4","itemContainer","includes","selectedItemContainer","onPress","itemName","name","itemDescription","description","itemPrice","price","shippingButton","length","disabledButton","disabled","shippingButtonText","create","flex","backgroundColor","fontSize","fontWeight","padding","borderBottomWidth","borderBottomColor","color","marginTop","paddingVertical","alignItems","marginHorizontal","borderRadius"],"sources":["/home/uoch/PFA2023/v1-front_end/screens/RetrieveGoodsScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, FlatList, Pressable } from 'react-native';\n\nexport default function RetrieveGoodsScreen({ navigation }) {\n  const [goodsData, setGoodsData] = useState([]);\n  const [selectedGoods, setSelectedGoods] = useState([]);\n\n  useEffect(() => {\n    fetchGoodsData();\n  }, []);\n\n  const fetchGoodsData = async () => {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/retrieve-goods/?store=<store_id>', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setGoodsData(data);\n      } else {\n        console.log('Error:', response.status);\n      }\n    } catch (error) {\n      console.log('Error:', error.message);\n    }\n  };\n\n  const handleSelectGoods = (item) => {\n    const isSelected = selectedGoods.some((selectedItem) => selectedItem.id === item.id);\n\n    if (isSelected) {\n      const updatedGoods = selectedGoods.filter((selectedItem) => selectedItem.id !== item.id);\n      setSelectedGoods(updatedGoods);\n    } else {\n      setSelectedGoods([...selectedGoods, item]);\n    }\n  };\n\n  const handleShipping = async () => {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/retrieve-goods/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          store: \"<store_id>\",\n          selectedProducts: selectedGoods.map(item => item.id),\n        }),\n      });\n\n      if (response.ok) {\n        // Shipping successful\n        setSelectedGoods([]);\n        // Navigate to the desired screen after shipping (e.g., ConfirmationScreen)\n        // navigation.navigate('ConfirmationScreen');\n      } else {\n        console.log('Error:', response.status);\n      }\n    } catch (error) {\n      console.log('Error:', error.message);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.headerText}>Select Goods to Retrieve</Text>\n      <FlatList\n        data={goodsData}\n        keyExtractor={(item) => item.id.toString()}\n        renderItem={({ item }) => (\n          <Pressable\n            style={[styles.itemContainer, selectedGoods.includes(item) && styles.selectedItemContainer]}\n            onPress={() => handleSelectGoods(item)}\n          >\n            <Text style={styles.itemName}>{item.name}</Text>\n            <Text style={styles.itemDescription}>{item.description}</Text>\n            <Text style={styles.itemPrice}>{item.price}</Text>\n          </Pressable>\n        )}\n      />\n      <Pressable\n        style={[styles.shippingButton, selectedGoods.length === 0 && styles.disabledButton]}\n        onPress={handleShipping}\n        disabled={selectedGoods.length === 0}\n      >\n        <Text style={styles.shippingButtonText}>Ship Goods</Text>\n      </Pressable>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F5F5F5',\n  },\n  headerText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    padding: 20,\n  },\n  itemContainer: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#CCCCCC',\n  },\n  selectedItemContainer: {\n    backgroundColor: '#E6F2FF',\n  },\n  itemName: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666666',\n  },\n  itemPrice: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginTop: 10,\n  },\n  shippingButton: {\n    backgroundColor: '#333333',\n    paddingVertical: 15,\n    alignItems: 'center',\n    marginTop: 20,\n    marginHorizontal: 20,\n    borderRadius: 8,\n  },\n  disabledButton: {\n    backgroundColor: '#AAAAAA',\n  },\n  shippingButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}