{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function RetrieveGoodsScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    goodsData = _useState2[0],\n    setGoodsData = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedGoods = _useState4[0],\n    setSelectedGoods = _useState4[1];\n  useEffect(function () {\n    checkTokenAndFetchData();\n  }, []);\n  var checkTokenAndFetchData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var authToken = yield AsyncStorage.getItem('authToken');\n        if (authToken) {\n          fetchGoodsData(authToken);\n        } else {\n          navigation.navigate('Login');\n        }\n      } catch (error) {\n        console.error('Error checking token:', error);\n      }\n    });\n    return function checkTokenAndFetchData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fetchGoodsData = function () {\n    var _ref3 = _asyncToGenerator(function* (authToken) {\n      try {\n        var response = yield fetch('http://127.0.0.1:8000/api/retrieve-goods/?store=<store_id>', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: \"Token \" + authToken\n          }\n        });\n        if (response.ok) {\n          var data = yield response.json();\n          setGoodsData(data);\n        } else {\n          console.log('Error:', response.status);\n        }\n      } catch (error) {\n        console.log('Error:', error.message);\n      }\n    });\n    return function fetchGoodsData(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSelectGoods = function handleSelectGoods(item) {\n    var isSelected = selectedGoods.some(function (selectedItem) {\n      return selectedItem.id === item.id;\n    });\n    if (isSelected) {\n      var updatedGoods = selectedGoods.filter(function (selectedItem) {\n        return selectedItem.id !== item.id;\n      });\n      setSelectedGoods(updatedGoods);\n    } else {\n      setSelectedGoods([].concat(_toConsumableArray(selectedGoods), [item]));\n    }\n  };\n  var handleShipping = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch('YOUR_API_ENDPOINT', {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(selectedGoods)\n        });\n        if (response.ok) {\n          setSelectedGoods([]);\n        } else {\n          console.log('Error:', response.status);\n        }\n      } catch (error) {\n        console.log('Error:', error.message);\n      }\n    });\n    return function handleShipping() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.headerText,\n      children: \"Select Goods to Retrieve\"\n    }), _jsx(FlatList, {\n      data: goodsData,\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      renderItem: function renderItem(_ref5) {\n        var item = _ref5.item;\n        return _jsxs(Pressable, {\n          style: [styles.itemContainer, selectedGoods.includes(item) && styles.selectedItemContainer],\n          onPress: function onPress() {\n            return handleSelectGoods(item);\n          },\n          children: [_jsx(Text, {\n            style: styles.itemName,\n            children: item.name\n          }), _jsx(Text, {\n            style: styles.itemDescription,\n            children: item.description\n          }), _jsx(Text, {\n            style: styles.itemPrice,\n            children: item.price\n          })]\n        });\n      }\n    }), _jsx(Pressable, {\n      style: [styles.shippingButton, selectedGoods.length === 0 && styles.disabledButton],\n      onPress: handleShipping,\n      disabled: selectedGoods.length === 0,\n      children: _jsx(Text, {\n        style: styles.shippingButtonText,\n        children: \"Ship Goods\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F5F5F5'\n  },\n  headerText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    padding: 20\n  },\n  itemContainer: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#CCCCCC'\n  },\n  selectedItemContainer: {\n    backgroundColor: '#E6F2FF'\n  },\n  itemName: {\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666666'\n  },\n  itemPrice: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginTop: 10\n  },\n  shippingButton: {\n    backgroundColor: '#333333',\n    paddingVertical: 15,\n    alignItems: 'center',\n    marginTop: 20,\n    marginHorizontal: 20,\n    borderRadius: 8\n  },\n  disabledButton: {\n    backgroundColor: '#AAAAAA'\n  },\n  shippingButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","FlatList","Pressable","AsyncStorage","jsx","_jsx","jsxs","_jsxs","RetrieveGoodsScreen","_ref","navigation","_useState","_useState2","_slicedToArray","goodsData","setGoodsData","_useState3","_useState4","selectedGoods","setSelectedGoods","checkTokenAndFetchData","_ref2","_asyncToGenerator","authToken","getItem","fetchGoodsData","navigate","error","console","apply","arguments","_ref3","response","fetch","method","headers","Authorization","ok","data","json","log","status","message","_x","handleSelectGoods","item","isSelected","some","selectedItem","id","updatedGoods","filter","concat","_toConsumableArray","handleShipping","_ref4","body","JSON","stringify","style","styles","container","children","headerText","keyExtractor","toString","renderItem","_ref5","itemContainer","includes","selectedItemContainer","onPress","itemName","name","itemDescription","description","itemPrice","price","shippingButton","length","disabledButton","disabled","shippingButtonText","create","flex","backgroundColor","fontSize","fontWeight","padding","borderBottomWidth","borderBottomColor","color","marginTop","paddingVertical","alignItems","marginHorizontal","borderRadius"],"sources":["/home/uoch/PFA2023/v1-front_end/screens/RetrieveGoodsScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, FlatList, Pressable } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport default function RetrieveGoodsScreen({ navigation }) {\n  const [goodsData, setGoodsData] = useState([]);\n  const [selectedGoods, setSelectedGoods] = useState([]);\n\n  useEffect(() => {\n    checkTokenAndFetchData();\n  }, []);\n\n  const checkTokenAndFetchData = async () => {\n    try {\n      const authToken = await AsyncStorage.getItem('authToken');\n      if (authToken) {\n        fetchGoodsData(authToken);\n      } else {\n        navigation.navigate('Login');\n      }\n    } catch (error) {\n      console.error('Error checking token:', error);\n    }\n  };\n\n  const fetchGoodsData = async (authToken) => {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/retrieve-goods/?store=<store_id>', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Token ${authToken}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setGoodsData(data);\n      } else {\n        console.log('Error:', response.status);\n      }\n    } catch (error) {\n      console.log('Error:', error.message);\n    }\n  };\n\n  const handleSelectGoods = (item) => {\n    const isSelected = selectedGoods.some((selectedItem) => selectedItem.id === item.id);\n\n    if (isSelected) {\n      const updatedGoods = selectedGoods.filter((selectedItem) => selectedItem.id !== item.id);\n      setSelectedGoods(updatedGoods);\n    } else {\n      setSelectedGoods([...selectedGoods, item]);\n    }\n  };\n\n  const handleShipping = async () => {\n    try {\n      const response = await fetch('YOUR_API_ENDPOINT', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(selectedGoods),\n      });\n\n      if (response.ok) {\n        // Shipping successful\n        setSelectedGoods([]);\n        // Navigate to the desired screen after shipping (e.g., ConfirmationScreen)\n        // navigation.navigate('ConfirmationScreen');\n      } else {\n        console.log('Error:', response.status);\n      }\n    } catch (error) {\n      console.log('Error:', error.message);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.headerText}>Select Goods to Retrieve</Text>\n      <FlatList\n        data={goodsData}\n        keyExtractor={(item) => item.id.toString()}\n        renderItem={({ item }) => (\n          <Pressable\n            style={[styles.itemContainer, selectedGoods.includes(item) && styles.selectedItemContainer]}\n            onPress={() => handleSelectGoods(item)}\n          >\n            <Text style={styles.itemName}>{item.name}</Text>\n            <Text style={styles.itemDescription}>{item.description}</Text>\n            <Text style={styles.itemPrice}>{item.price}</Text>\n          </Pressable>\n        )}\n      />\n      <Pressable\n        style={[styles.shippingButton, selectedGoods.length === 0 && styles.disabledButton]}\n        onPress={handleShipping}\n        disabled={selectedGoods.length === 0}\n      >\n        <Text style={styles.shippingButtonText}>Ship Goods</Text>\n      </Pressable>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F5F5F5',\n  },\n  headerText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    padding: 20,\n  },\n  itemContainer: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#CCCCCC',\n  },\n  selectedItemContainer: {\n    backgroundColor: '#E6F2FF',\n  },\n  itemName: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#666666',\n  },\n  itemPrice: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginTop: 10,\n  },\n  shippingButton: {\n    backgroundColor: '#333333',\n    paddingVertical: 15,\n    alignItems: 'center',\n    marginTop: 20,\n    marginHorizontal: 20,\n    borderRadius: 8,\n  },\n  disabledButton: {\n    backgroundColor: '#AAAAAA',\n  },\n  shippingButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}